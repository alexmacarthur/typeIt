// TypeIt by Alex MacArthur - https://typeitjs.com
const e={breakLines:!0,cursor:!0,cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},t=[null,null,{}];var n=(e,t)=>Object.assign({},e,t),r=e=>Array.from(e),i=e=>(new DOMParser).parseFromString(e,"text/html").body;const a=(e,t=null,n=!1)=>{let i=r(e.childNodes).flatMap(e=>{return 3===(t=e).nodeType||"BR"===t.tagName?e:a(e);var t});return t&&(i=i.filter(e=>!t.contains(e))),n?i.reverse():i},l=(e,t=null)=>({node:t,content:e});function o(e){let t=i(e);return a(t).flatMap(e=>e.nodeValue?r(e.nodeValue).map(t=>l(t,e)):l(e))}function s(e,t=!0){return t?o(e):r(e).map(e=>l(e))}var u=e=>document.createElement(e),c=(e,t="")=>{let n=u("style");n.id=t,n.appendChild(document.createTextNode(e)),document.head.appendChild(n)},d=e=>Array.isArray(e),f=e=>(d(e)||(e=[e/2,e/2]),e),h=(e,t)=>Math.abs(Math.random()*(e+t-(e-t))+(e-t));function p(e,t,n){let r=(t=null!==t?t:e/3)/2;return n?[h(e,e/2),h(t,r)]:[e,t]}var y=e=>"value"in e,m=e=>"BODY"===e.tagName;const g=(e,t)=>{let n=r(t.querySelectorAll("*"));return[t].concat(n.reverse()).find(t=>t.cloneNode().isEqualNode(e.cloneNode()))},b=(e,t,n=null,r)=>{let i=t.content instanceof HTMLElement,l=t.node,o=null==l?void 0:l.parentNode,s=i?t.content:document.createTextNode(t.content);if(y(e))return void(e.value=`${e.value}${t.content}`);if(!i&&o&&!m(o)){let r=g(o,e);if(r&&((e,t)=>{let n=e.nextSibling;return!n||n.isEqualNode(t)})(r,n))e=r;else{s=o.cloneNode(),s.innerText=t.content;let n=o.parentNode,r=n.cloneNode();if(!m(n)){let t=g(r,e);for(;!t&&!m(n);){let i=r;i.innerHTML=s.outerHTML,s=i,n=n.parentNode,r=n.cloneNode(),t=g(r,e)}e=t||e}}}let u=a(e,n,!0)[r-1],c=u?u.parentNode:e;c.insertBefore(s,c.contains(n)?n:null)};var v=(e,t)=>(e[2]=n(e[2],t)||t,e),S=(e,t,n={},r=!1)=>e.map((i,a)=>{let l=[t,i,n];return r&&(0===a&&(l=v(l,{isFirst:!0})),a+1===e.length&&(l=v(l,{isLast:!0}))),l}),w=e=>e&&e.remove(),M=(e,t,n)=>{let r="string"==typeof e,i=!1,a=-1*e;if(r){let r="END"===e.toUpperCase();a=r?-1:1,i=r?t+a>0:t+a<n.length}return{isString:r,numberOfSteps:a,canKeepMoving:i}};function N(h,m={}){const g=(e,t)=>(K.add(e),((e={})=>{let t=e.delay;t&&K.add([[E,t]])})(t),this),v=(e={})=>[[H,e,{force:!0}],[H,U,{force:!0}]],N=e=>{let t=U.nextStringDelay;K.add([[E,t[0]],...e,[E,t[1]]])},T=()=>O?r(z.value):a(z,P,!0),x=e=>{P&&(P.classList.toggle("disabled",e),P.classList.toggle("with-delay",!e))},L=async(e,t)=>new Promise(n=>{I.push(setTimeout(async()=>{await e(),n()},t))}),D=async()=>{V.started=!0;let e,t=K.getItems();try{for(let r=0;r<t.length;r++){var n;if(V.frozen||V.destroyed)throw"";let i=t[r],a=i[2];e=[i,this],a.freezeCursor&&x(!0),q=p(U.speed,U.deleteSpeed,U.lifeLike),null!=a&&a.isFirst&&await U.beforeString(...e),await U.beforeStep(...e),await i[0].call(this,i[1],a),null!=(n=i[2])&&n.isLast&&await U.afterString(...e),await U.afterStep(...e),K.setMeta(r,{executed:!0}),x(!1)}if(V.completed=!0,await U.afterComplete(...e),!U.loop)throw"";let r=U.loopDelay;L(async()=>{await(async e=>{R&&await C(R),K.reset(),K.set(0,[E,e,{}]),await k(!0)})(r[0]),D()},r[1])}catch(e){}return this},E=(e=0)=>L(()=>{},e),C=e=>{let t=T(),{numberOfSteps:n,isString:r,canKeepMoving:i}=M(e,R,t);return R+=n,L(async()=>{((e,t,n,r)=>{if(!n)return;let i=t[(r>t.length?t.length:r)-1];(e=(null==i?void 0:i.parentNode)||e).insertBefore(n,i||null)})(z,T(),P,R),r&&i&&await C(n>0?"START":"END")},q[0])},$=e=>L(()=>{b(z,e,P,R)},q[0]),H=async e=>{U=n(U,e)},A=async()=>{O?z.value="":T().forEach(e=>{w(e)})},k=(e=!1)=>L(async()=>{let t=T(),n=t.length;n&&(O?z.value=z.value.slice(0,-1):(w(t[R]),z.querySelectorAll("*").forEach(e=>{if(!e.innerHTML&&"BR"!==e.tagName){let t=e;for(;1===t.parentElement.childNodes.length;)t=t.parentElement;w(t)}})),e&&n-1>0&&await k(!0))},q[1]);this.break=function(e){return g([[$,l(u("BR"))]],e)},this.delete=function(e,t){let n=v(t);return g([n[0],...[...Array(Math.abs(e)||1)].fill(null).map(()=>[k,!e,F]),n[1]],t)},this.empty=function(e={}){return g([[A]],e)},this.exec=function(e,t){let n=v(t);return g([n[0],[e,null],n[1]],t)},this.move=function(e,t){let n=M(e,R,T()),r=v(t),i=n.isString?e:Math.sign(e);return g([r[0],...[...Array(Math.abs(e)||1)].fill(null).map(()=>[C,i,F]),r[1]],t)},this.options=function(e){return g([[H,e]],e)},this.pause=function(e,t){return g([[E,e]],t)},this.type=function(e,t){let n=v(t),r=s(e,U.html),i=[n[0],...S(r,$,F,!0),n[1]];return g(i,t)},this.is=function(e){return V[e]},this.destroy=function(e=!0){I.forEach(e=>clearTimeout(e)),I=[],e&&w(P),V.destroyed=!0},this.freeze=function(){V.frozen=!0},this.unfreeze=function(){V.frozen=!1,D()},this.reset=function(){!this.is("destroyed")&&this.destroy(),K.reset(),R=0;for(let e in V)V[e]=!1;return O?z.value="":z.innerHTML="",this},this.go=function(){return V.started?this:((async()=>{if(!P)return;let e=`[data-typeit-id='${j}'] .ti-cursor`;c(`@keyframes blink-${j} { 0% {opacity: 0} 49% {opacity: 0} 50% {opacity: 1} } ${e} { animation: blink-${j} ${U.cursorSpeed/1e3}s infinite; } ${e}.with-delay { animation-delay: 500ms; } ${e}.disabled { animation: none; }`,j),z.appendChild(P),"loaded"===document.fonts.status||await document.fonts.ready,requestAnimationFrame(()=>{requestAnimationFrame(()=>{const e=P.getBoundingClientRect().width/2;P.style.margin=`0 -${e+2}px 0 -${e-2}px`})})})(),U.waitUntilVisible?(((e,t)=>{new IntersectionObserver((n,r)=>{n.forEach(n=>{n.isIntersecting&&(t(),r.unobserve(e))})},{threshold:1}).observe(e)})(z,D.bind(this)),this):(D(),this))},this.getQueue=function(){return K},this.getOptions=function(){return U},this.getElement=function(){return z};let z="string"==typeof(B=h)?document.querySelector(B):B;var B;let O=y(z),q=[],I=[],R=0,F={freezeCursor:!0},V={started:!1,completed:!1,frozen:!1,destroyed:!1},U=n(e,m);U=n(U,{html:!O&&U.html,nextStringDelay:f(U.nextStringDelay),loopDelay:f(U.loopDelay)});let j=Math.random().toString().substring(2,9),K=function(e){const r=function(e){return i=i.concat(e.map(e=>t.map((t,n)=>e[n]?e[n]:t))),this};let i=[];return r(e),{add:r,set:function(e,t){i[e]=t},reset:function(){i=i.map(e=>(e[2].executed=!1,e))},getItems:function(){return i.filter(e=>!e[2].executed)},setMeta:function(e,t){i[e][2]=n(i[e][2],t)}}}([[E,U.startDelay]]);z.dataset.typeitId=j,c("[data-typeit-id]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}");let P=(()=>{if(O||!U.cursor)return;let e=u("span");return e.innerHTML=i(U.cursorChar).innerHTML,e.className="ti-cursor",e.style.cssText=`display:inline;${(e=>{let{font:t,lineHeight:n,color:r}=window.getComputedStyle(e,null),i=u("I");return Object.assign(i.style,{color:r,font:t,lineHeight:n}),i.style.cssText})(z)}`,e})();var Q;U.strings=(e=>{let t=z.innerHTML;return t?(z.innerHTML="",U.startDelete?(o(t).forEach(e=>{b(z,e,P,R)}),N([[k,!0]]),e):[t.trim()].concat(e)):e})(d(Q=U.strings)?Q:[Q]),U.strings.length&&(()=>{let e=U.strings.filter(e=>!!e);e.forEach((t,n)=>{let r=s(t,U.html);K.add(S(r,$,F,!0)),n+1!==e.length&&N(U.breakLines?[[$,l(u("BR")),F]]:S(r,k,F))})})()}export default N;
